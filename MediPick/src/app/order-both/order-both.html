<div class="card mb-3 shadow-sm">
  <div class="card-body bg-light text-left">
    <h4 class="mb-0 text-dark fw-bold">Order List</h4>
    <p>Track your current and past medicine orders</p>
  </div>
</div>

<div *ngIf="ordersbyuserid.length > 0; else noOrders">
  <div class="card mb-3" *ngFor="let order of ordersbyuserid">
    <div class="card-header d-flex justify-content-between align-items-center">
      <strong>Order ID: {{ order.orderId }}</strong>
      <span>{{ order.orderDate | date: 'medium' }}</span>
    </div>

    <div class="card-body">
      <p><strong>User ID:</strong> {{ order.userId }}</p>
      <p><strong>Shipping Address:</strong> {{ order.shippingAddress }}</p>
      <p><strong>Payment Status:</strong> {{ order.paymentStatus }}</p>
      <p><strong>Order Status:</strong> {{ order.orderStatus }}</p>
      <p><strong>Total Amount:</strong> {{ order.totalAmount | currency }}</p>

      <h6 class="fw-bold">Order Items</h6>
      <ul class="list-group list-group-flush">
        <li class="list-group-item" *ngFor="let item of order.orderItems">
          <strong>Medicine:</strong> {{ item.medicineName || 'Loading...' }} |
          <strong>Quantity:</strong> {{ item.quantity }}
        </li>
      </ul>
    </div>

    <div class="card-footer text-end">
      <button class="btn btn-danger btn-sm"
              (click)="cancelOrder(order.orderId)"
              [disabled]="order.orderStatus === 'Cancelled'">
        Cancel Order
      </button>
    </div>
  </div>
</div>

<ng-template #noOrders>
  <div class="alert alert-warning mt-3">
    No orders found for this user.
  </div>
</ng-template>
